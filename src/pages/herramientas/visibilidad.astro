---
import ToolLayout from '../../layouts/ToolLayout.astro';
import ErrorBoundary from '../../components/ErrorBoundary.astro';

---

<ToolLayout
  title="Comprobador de Visibilidad en Google | SEO Tools Gratuitas"
  description="Analiza la visibilidad de tu sitio web en los resultados de búsqueda de Google. Herramienta gratuita para monitorear tu posicionamiento."
  toolName="Comprobador de Visibilidad en Google"
>
  <div class="space-y-6">
    <div>
      <label for="domain" class="block text-sm font-medium text-gray-700 mb-2">
        URL del sitio web
      </label>
      <input
        type="url"
        id="domain"
        class="shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"
        placeholder="https://ejemplo.com"
      />
    </div>

    <div>
      <button
        type="button"
        id="checkVisibility"
        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
      >
        Analizar Visibilidad
      </button>
    </div>

    <div id="results" class="hidden space-y-4">
      <div class="bg-white p-4 rounded-lg border border-gray-200">
        <h3 class="text-lg font-medium text-gray-900 mb-2">Resultados del análisis</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="p-3 bg-gray-50 rounded">
            <p class="text-sm font-medium text-gray-500">Páginas indexadas</p>
            <p class="mt-1 text-2xl font-semibold text-gray-900" id="indexedPages">-</p>
          </div>
          <div class="p-3 bg-gray-50 rounded">
            <p class="text-sm font-medium text-gray-500">Visibilidad estimada</p>
            <p class="mt-1 text-2xl font-semibold text-gray-900" id="visibilityScore">-</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const domainInput = document.querySelector('#domain') as HTMLInputElement;
    const checkButton = document.querySelector('#checkVisibility') as HTMLButtonElement;
    const results = document.querySelector('#results') as HTMLDivElement;
    const indexedPages = document.querySelector('#indexedPages') as HTMLParagraphElement;
    const visibilityScore = document.querySelector('#visibilityScore') as HTMLParagraphElement;

    checkButton.addEventListener('click', async () => {
      const domain = domainInput.value.trim();
      if (!domain) {
        alert('Por favor, ingresa la URL de tu sitio web');
        return;
      }

      // Simulación de análisis
      checkButton.disabled = true;
      checkButton.textContent = 'Analizando...';
      
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      // Mostrar resultados simulados
      results.classList.remove('hidden');
      indexedPages.textContent = Math.floor(Math.random() * 1000).toString();
      visibilityScore.textContent = `${Math.floor(Math.random() * 100)}%`;
      
      checkButton.disabled = false;
      checkButton.textContent = 'Analizar Visibilidad';
    });
  </script>
</ToolLayout>